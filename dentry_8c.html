<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>oneOS: src/kernel/fs/dentry.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">oneOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_cbd7f246bdf7dc0a50281a272327e6ed.html">kernel</a></li><li class="navelem"><a class="el" href="dir_f848a285e60993dcb3189737897d2857.html">fs</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">dentry.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="dynamic__array_8h_source.html">algo/dynamic_array.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="vfs_8h_source.html">fs/vfs.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="log_8h_source.html">log.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="kmalloc_8h_source.html">mem/kmalloc.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="sys__handler_8h_source.html">sys_handler.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="kassert_8h_source.html">utils/kassert.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="mem_8h_source.html">utils/mem.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="system_8h_source.html">platform/x86/system.h</a>&gt;</code><br />
</div>
<p><a href="dentry_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a06545cfc80ed4c5d1f5fa67ccb5a6d36"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a06545cfc80ed4c5d1f5fa67ccb5a6d36">DENTRY_ALLOC_SIZE</a>&#160;&#160;&#160;(4 * <a class="el" href="include_2mem_2vmm_2vmm_8h.html#a1841fd1a462d245d8c73dce55e2f45da">KB</a>) /* Shows the size of list's parts. */</td></tr>
<tr class="separator:a06545cfc80ed4c5d1f5fa67ccb5a6d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adf65e4375d24782110f0e05ccfa023de"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#adf65e4375d24782110f0e05ccfa023de">DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE</a>&#160;&#160;&#160;(16 * <a class="el" href="include_2mem_2vmm_2vmm_8h.html#a1841fd1a462d245d8c73dce55e2f45da">KB</a>)</td></tr>
<tr class="separator:adf65e4375d24782110f0e05ccfa023de"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a0eba2c36d13ed4e8f51731dae9e849e3"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a0eba2c36d13ed4e8f51731dae9e849e3">need_to_free_inode_cache</a> ()</td></tr>
<tr class="separator:a0eba2c36d13ed4e8f51731dae9e849e3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a80cc0f80828ae6440cdff27fc055cc41"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a80cc0f80828ae6440cdff27fc055cc41">free_inode_cache</a> ()</td></tr>
<tr class="separator:a80cc0f80828ae6440cdff27fc055cc41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa70b793dfe8742b7c834f3b40a157853"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#aa70b793dfe8742b7c834f3b40a157853">dentry_cache_alloc</a> ()</td></tr>
<tr class="separator:aa70b793dfe8742b7c834f3b40a157853"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6a4806dd03810e6f53fb61a317cbc613"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a6a4806dd03810e6f53fb61a317cbc613">dentry_cache_find_empty_entry</a> ()</td></tr>
<tr class="separator:a6a4806dd03810e6f53fb61a317cbc613"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a351416c910ba0401b8687ef7e9df3448"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a351416c910ba0401b8687ef7e9df3448">dentry_delete_inode</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:a351416c910ba0401b8687ef7e9df3448"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7ddfb25a846aa0f251527954821c97d9"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a7ddfb25a846aa0f251527954821c97d9">dentry_flush_inode</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:a7ddfb25a846aa0f251527954821c97d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0d7784874f6ecc051f76b9463949191"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#ac0d7784874f6ecc051f76b9463949191">dentry_delete_from_cache</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:ac0d7784874f6ecc051f76b9463949191"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9e161643a68aafcef35ca297684df7"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a7f9e161643a68aafcef35ca297684df7">dentry_prefree</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:a7f9e161643a68aafcef35ca297684df7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49bb077d5d65f1f859e1f7c4e79bf8a7"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a49bb077d5d65f1f859e1f7c4e79bf8a7">dentry_alloc_new</a> (<a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dev_indx, <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> inode_indx)</td></tr>
<tr class="separator:a49bb077d5d65f1f859e1f7c4e79bf8a7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5296fce1c722f24de068b1250be6fd0"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#ac5296fce1c722f24de068b1250be6fd0">dentry_set_parent</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *to, <a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *parent)</td></tr>
<tr class="separator:ac5296fce1c722f24de068b1250be6fd0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af3851d9466c6d7064d13a78c766dffa9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#af3851d9466c6d7064d13a78c766dffa9">dentry_get_parent</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:af3851d9466c6d7064d13a78c766dffa9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abd1b36974bb146945bfb53764b2164c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#abd1b36974bb146945bfb53764b2164c6">dentry_flusher</a> ()</td></tr>
<tr class="separator:abd1b36974bb146945bfb53764b2164c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0aedc0c189c361d51354aa240ee4e30"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#ac0aedc0c189c361d51354aa240ee4e30">dentry_get</a> (<a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dev_indx, <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> inode_indx)</td></tr>
<tr class="separator:ac0aedc0c189c361d51354aa240ee4e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aebac28d68ff3f24264ff52fe1bc57dec"><td class="memItemLeft" align="right" valign="top"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#aebac28d68ff3f24264ff52fe1bc57dec">dentry_duplicate</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:aebac28d68ff3f24264ff52fe1bc57dec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69e404d90f367fc57bb66dbaf1935343"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a69e404d90f367fc57bb66dbaf1935343">dentry_put_impl</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:a69e404d90f367fc57bb66dbaf1935343"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae54e68df17f63fc2d4eaef436012adc4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#ae54e68df17f63fc2d4eaef436012adc4">dentry_force_put</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:ae54e68df17f63fc2d4eaef436012adc4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7b69e608ff6502aa7604cb61d1e85d3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a7b69e608ff6502aa7604cb61d1e85d3e">dentry_put</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>)</td></tr>
<tr class="separator:a7b69e608ff6502aa7604cb61d1e85d3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a657d79e124cfadcff09eb19d5068d242"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a657d79e124cfadcff09eb19d5068d242">dentry_put_all_dentries_of_dev</a> (<a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dev_indx)</td></tr>
<tr class="separator:a657d79e124cfadcff09eb19d5068d242"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7caf5229634e02f763b50829867068dc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a7caf5229634e02f763b50829867068dc">dentry_set_flag</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>, <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flag)</td></tr>
<tr class="separator:a7caf5229634e02f763b50829867068dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afc4aba9ad1a484cc52d4bba738a3c9c1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>, <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flag)</td></tr>
<tr class="separator:afc4aba9ad1a484cc52d4bba738a3c9c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a717a16a3c025a9b8751e8ad444698bc2"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a717a16a3c025a9b8751e8ad444698bc2">dentry_rem_flag</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>, <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> flag)</td></tr>
<tr class="separator:a717a16a3c025a9b8751e8ad444698bc2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc023963b93341ce84e260d1806b1493"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#abc023963b93341ce84e260d1806b1493">dentry_inode_set_flag</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>, <a class="el" href="ext2_8h.html#af456ddc19314d0bde5426f9027e96b05">mode_t</a> <a class="el" href="mode_8h.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>)</td></tr>
<tr class="separator:abc023963b93341ce84e260d1806b1493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6640ef583a47258cca09cbad9a30f749"><td class="memItemLeft" align="right" valign="top"><a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a6640ef583a47258cca09cbad9a30f749">dentry_inode_test_flag</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>, <a class="el" href="ext2_8h.html#af456ddc19314d0bde5426f9027e96b05">mode_t</a> <a class="el" href="mode_8h.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>)</td></tr>
<tr class="separator:a6640ef583a47258cca09cbad9a30f749"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a729416ddb286cffb1a5eee4b850e8eec"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a729416ddb286cffb1a5eee4b850e8eec">dentry_inode_rem_flag</a> (<a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *<a class="el" href="structdentry.html">dentry</a>, <a class="el" href="ext2_8h.html#af456ddc19314d0bde5426f9027e96b05">mode_t</a> <a class="el" href="mode_8h.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>)</td></tr>
<tr class="separator:a729416ddb286cffb1a5eee4b850e8eec"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d281d3348d9317ad0fdb3a0c51520b6"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a6d281d3348d9317ad0fdb3a0c51520b6">dentry_stat_cached_count</a> ()</td></tr>
<tr class="separator:a6d281d3348d9317ad0fdb3a0c51520b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a1440b9e3b3bbb1893389e0e6a5017ef0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="structvfs__device__t.html">vfs_device_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a1440b9e3b3bbb1893389e0e6a5017ef0">_vfs_devices</a> [<a class="el" href="driver__manager_8h.html#a0cea68640d32312d57811eef08df8369">MAX_DEVICES_COUNT</a>]</td></tr>
<tr class="separator:a1440b9e3b3bbb1893389e0e6a5017ef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749d224b855218d25c593f77bb78177f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="dynamic__array_8h.html#ace0cd9ffaa622afed35768780ac18d17">dynamic_array_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a749d224b855218d25c593f77bb78177f">_vfs_fses</a></td></tr>
<tr class="separator:a749d224b855218d25c593f77bb78177f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d65079fb3ea2a5b88922408097fca7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a0d65079fb3ea2a5b88922408097fca7c">root_fs_dev_id</a></td></tr>
<tr class="separator:a0d65079fb3ea2a5b88922408097fca7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9bcb4e270f6db95e234f0ec7dfb8d1f9"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a9bcb4e270f6db95e234f0ec7dfb8d1f9">can_cache_inodes</a> = 1</td></tr>
<tr class="separator:a9bcb4e270f6db95e234f0ec7dfb8d1f9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fc5d8cede26a76848d455a856dfaacf"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a9fc5d8cede26a76848d455a856dfaacf">stat_cached_dentries</a> = 0</td></tr>
<tr class="separator:a9fc5d8cede26a76848d455a856dfaacf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a841c690e629d9c51eac5eae5fc78b8a4"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a841c690e629d9c51eac5eae5fc78b8a4">stat_cached_inodes_area_size</a> = 0</td></tr>
<tr class="separator:a841c690e629d9c51eac5eae5fc78b8a4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a10455924d574d1aefefa9eadd2cc25"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="vfs_8h.html#a064037ddd427e5d6b34028d44d124626">dentry_cache_list_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a></td></tr>
<tr class="separator:a0a10455924d574d1aefefa9eadd2cc25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3131a395ac1e16e192d35b2f2ad0f8dd"><td class="memItemLeft" align="right" valign="top">static <a class="el" href="syscall__structs_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="dentry_8c.html#a3131a395ac1e16e192d35b2f2ad0f8dd">dentry_cahced</a></td></tr>
<tr class="separator:a3131a395ac1e16e192d35b2f2ad0f8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a06545cfc80ed4c5d1f5fa67ccb5a6d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a06545cfc80ed4c5d1f5fa67ccb5a6d36">&#9670;&nbsp;</a></span>DENTRY_ALLOC_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DENTRY_ALLOC_SIZE&#160;&#160;&#160;(4 * <a class="el" href="include_2mem_2vmm_2vmm_8h.html#a1841fd1a462d245d8c73dce55e2f45da">KB</a>) /* Shows the size of list's parts. */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00020">20</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

</div>
</div>
<a id="adf65e4375d24782110f0e05ccfa023de"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf65e4375d24782110f0e05ccfa023de">&#9670;&nbsp;</a></span>DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE&#160;&#160;&#160;(16 * <a class="el" href="include_2mem_2vmm_2vmm_8h.html#a1841fd1a462d245d8c73dce55e2f45da">KB</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00021">21</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a49bb077d5d65f1f859e1f7c4e79bf8a7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a49bb077d5d65f1f859e1f7c4e79bf8a7">&#9670;&nbsp;</a></span>dentry_alloc_new()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>* dentry_alloc_new </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>dev_indx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>inode_indx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00167">167</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;{</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="keywordflow">if</span> (inode_indx == 0) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160; </div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="structdentry.html">dentry_t</a>* <a class="code" href="structdentry.html">dentry</a> = <a class="code" href="dentry_8c.html#a6a4806dd03810e6f53fb61a317cbc613">dentry_cache_find_empty_entry</a>();</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160; </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">/* If inode_indx isn&#39;t 0, so we can say that we replace a valid dentry, which</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="comment">       has area for storing inode allocated. */</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="keywordtype">bool</span> already_allocated_inode = (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> != 0);</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> = 1;</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ab4c40ea06292550bc743b6d49b03487d">flags</a> = 0;</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5f1758d4cfa6f2d5d746de2192f61338">dev_indx</a> = dev_indx;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa7900a1e668ca69caf3c1e309947e494">dev</a> = &amp;<a class="code" href="dentry_8c.html#a1440b9e3b3bbb1893389e0e6a5017ef0">_vfs_devices</a>[<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5f1758d4cfa6f2d5d746de2192f61338">dev_indx</a>];</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a> = <a class="code" href="dynamic__array_8h.html#a9a2b27bbe047fda81fb731cde9b1e532">dynamic_array_get</a>(&amp;<a class="code" href="dentry_8c.html#a749d224b855218d25c593f77bb78177f">_vfs_fses</a>, <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa7900a1e668ca69caf3c1e309947e494">dev</a>-&gt;<a class="code" href="structvfs__device__t.html#ab41714b24a50aa3c9f550cd7d2879663">fs</a>);</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> = inode_indx;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ae7cb95c90d2b85eb198bf619bb55c4cc">fsdata</a> = <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a>-&gt;<a class="code" href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">dentry</a>.<a class="code" href="structdentry__ops.html#a0b11613ea2cae3efc1587976041be459">get_fsdata</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160; </div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    <span class="keywordflow">if</span> (!already_allocated_inode) {</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;        <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a> = (<a class="code" href="structinode__t.html">inode_t</a>*)<a class="code" href="kmalloc_8h.html#afec98775e8113dc6d98f75a582c3646f">kmalloc</a>(<a class="code" href="ext2_8h.html#a0ee19d50310bec0d74d03a156333b75c">INODE_LEN</a>);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;        <a class="code" href="dentry_8c.html#a841c690e629d9c51eac5eae5fc78b8a4">stat_cached_inodes_area_size</a> += <a class="code" href="ext2_8h.html#a0ee19d50310bec0d74d03a156333b75c">INODE_LEN</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    }</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160; </div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a>-&gt;<a class="code" href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">dentry</a>.<a class="code" href="structdentry__ops.html#adf8c415f353d7ad04a85863952d15e37">read_inode</a>(<a class="code" href="structdentry.html">dentry</a>) &lt; 0) {</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;        <a class="code" href="log_8h.html#a01de98826735d07d7d41604a2ced9a64">log_error</a>(<span class="stringliteral">&quot;[Dentry] Can&#39;t read inode %d %d (dev, ino)&quot;</span>, dev_indx, inode_indx);</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    }</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160; </div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <a class="code" href="dentry_8c.html#a9fc5d8cede26a76848d455a856dfaacf">stat_cached_dentries</a>++;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdentry.html">dentry</a>;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a1440b9e3b3bbb1893389e0e6a5017ef0"><div class="ttname"><a href="dentry_8c.html#a1440b9e3b3bbb1893389e0e6a5017ef0">_vfs_devices</a></div><div class="ttdeci">vfs_device_t _vfs_devices[MAX_DEVICES_COUNT]</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8c_source.html#l00021">vfs.c:21</a></div></div>
<div class="ttc" id="adentry_8c_html_a6a4806dd03810e6f53fb61a317cbc613"><div class="ttname"><a href="dentry_8c.html#a6a4806dd03810e6f53fb61a317cbc613">dentry_cache_find_empty_entry</a></div><div class="ttdeci">static dentry_t * dentry_cache_find_empty_entry()</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00084">dentry.c:84</a></div></div>
<div class="ttc" id="adentry_8c_html_a749d224b855218d25c593f77bb78177f"><div class="ttname"><a href="dentry_8c.html#a749d224b855218d25c593f77bb78177f">_vfs_fses</a></div><div class="ttdeci">dynamic_array_t _vfs_fses</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8c_source.html#l00022">vfs.c:22</a></div></div>
<div class="ttc" id="adentry_8c_html_a841c690e629d9c51eac5eae5fc78b8a4"><div class="ttname"><a href="dentry_8c.html#a841c690e629d9c51eac5eae5fc78b8a4">stat_cached_inodes_area_size</a></div><div class="ttdeci">static uint32_t stat_cached_inodes_area_size</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00029">dentry.c:29</a></div></div>
<div class="ttc" id="adentry_8c_html_a9fc5d8cede26a76848d455a856dfaacf"><div class="ttname"><a href="dentry_8c.html#a9fc5d8cede26a76848d455a856dfaacf">stat_cached_dentries</a></div><div class="ttdeci">static uint32_t stat_cached_dentries</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00028">dentry.c:28</a></div></div>
<div class="ttc" id="adynamic__array_8h_html_a9a2b27bbe047fda81fb731cde9b1e532"><div class="ttname"><a href="dynamic__array_8h.html#a9a2b27bbe047fda81fb731cde9b1e532">dynamic_array_get</a></div><div class="ttdeci">void * dynamic_array_get(dynamic_array_t *v, int index)</div><div class="ttdef"><b>Definition:</b> <a href="dynamic__array_8c_source.html#l00071">dynamic_array.c:71</a></div></div>
<div class="ttc" id="aext2_8h_html_a0ee19d50310bec0d74d03a156333b75c"><div class="ttname"><a href="ext2_8h.html#a0ee19d50310bec0d74d03a156333b75c">INODE_LEN</a></div><div class="ttdeci">#define INODE_LEN</div><div class="ttdef"><b>Definition:</b> <a href="ext2_8h_source.html#l00089">ext2.h:89</a></div></div>
<div class="ttc" id="akmalloc_8h_html_afec98775e8113dc6d98f75a582c3646f"><div class="ttname"><a href="kmalloc_8h.html#afec98775e8113dc6d98f75a582c3646f">kmalloc</a></div><div class="ttdeci">void * kmalloc(uint32_t size)</div><div class="ttdef"><b>Definition:</b> <a href="kmalloc_8c_source.html#l00053">kmalloc.c:53</a></div></div>
<div class="ttc" id="alog_8h_html_a01de98826735d07d7d41604a2ced9a64"><div class="ttname"><a href="log_8h.html#a01de98826735d07d7d41604a2ced9a64">log_error</a></div><div class="ttdeci">void log_error(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00122">log.c:122</a></div></div>
<div class="ttc" id="astructdentry__ops_html_a0b11613ea2cae3efc1587976041be459"><div class="ttname"><a href="structdentry__ops.html#a0b11613ea2cae3efc1587976041be459">dentry_ops::get_fsdata</a></div><div class="ttdeci">fsdata_t(* get_fsdata)(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00105">vfs.h:105</a></div></div>
<div class="ttc" id="astructdentry__ops_html_adf8c415f353d7ad04a85863952d15e37"><div class="ttname"><a href="structdentry__ops.html#adf8c415f353d7ad04a85863952d15e37">dentry_ops::read_inode</a></div><div class="ttdeci">int(* read_inode)(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00102">vfs.h:102</a></div></div>
<div class="ttc" id="astructdentry_html"><div class="ttname"><a href="structdentry.html">dentry</a></div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00054">vfs.h:54</a></div></div>
<div class="ttc" id="astructdentry_html_a449902caf8375b0834b0b2852896dfc1"><div class="ttname"><a href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">dentry::ops</a></div><div class="ttdeci">struct fs_ops * ops</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00060">vfs.h:60</a></div></div>
<div class="ttc" id="astructdentry_html_a5d1923813933d33cedb7df4aaee6cf84"><div class="ttname"><a href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">dentry::d_count</a></div><div class="ttdeci">uint32_t d_count</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00055">vfs.h:55</a></div></div>
<div class="ttc" id="astructdentry_html_a5f1758d4cfa6f2d5d746de2192f61338"><div class="ttname"><a href="structdentry.html#a5f1758d4cfa6f2d5d746de2192f61338">dentry::dev_indx</a></div><div class="ttdeci">uint32_t dev_indx</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00061">vfs.h:61</a></div></div>
<div class="ttc" id="astructdentry_html_a7315cd079d1109369c66fe804b9fd4ba"><div class="ttname"><a href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">dentry::inode_indx</a></div><div class="ttdeci">uint32_t inode_indx</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00057">vfs.h:57</a></div></div>
<div class="ttc" id="astructdentry_html_aa570c7b3f7c32ef505901f3a3e2931b5"><div class="ttname"><a href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">dentry::inode</a></div><div class="ttdeci">inode_t * inode</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00058">vfs.h:58</a></div></div>
<div class="ttc" id="astructdentry_html_aa7900a1e668ca69caf3c1e309947e494"><div class="ttname"><a href="structdentry.html#aa7900a1e668ca69caf3c1e309947e494">dentry::dev</a></div><div class="ttdeci">vfs_device_t * dev</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00062">vfs.h:62</a></div></div>
<div class="ttc" id="astructdentry_html_ab4c40ea06292550bc743b6d49b03487d"><div class="ttname"><a href="structdentry.html#ab4c40ea06292550bc743b6d49b03487d">dentry::flags</a></div><div class="ttdeci">uint32_t flags</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00056">vfs.h:56</a></div></div>
<div class="ttc" id="astructdentry_html_ae7cb95c90d2b85eb198bf619bb55c4cc"><div class="ttname"><a href="structdentry.html#ae7cb95c90d2b85eb198bf619bb55c4cc">dentry::fsdata</a></div><div class="ttdeci">fsdata_t fsdata</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00059">vfs.h:59</a></div></div>
<div class="ttc" id="astructfs__ops_html_a00ef40bfbe8133b4e40ba6f22e120f68"><div class="ttname"><a href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">fs_ops::dentry</a></div><div class="ttdeci">dentry_ops_t dentry</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00115">vfs.h:115</a></div></div>
<div class="ttc" id="astructinode__t_html"><div class="ttname"><a href="structinode__t.html">inode_t</a></div><div class="ttdef"><b>Definition:</b> <a href="ext2_8h_source.html#l00091">ext2.h:91</a></div></div>
<div class="ttc" id="astructvfs__device__t_html_ab41714b24a50aa3c9f550cd7d2879663"><div class="ttname"><a href="structvfs__device__t.html#ab41714b24a50aa3c9f550cd7d2879663">vfs_device_t::fs</a></div><div class="ttdeci">int fs</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00035">vfs.h:35</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8c_source.html#l00021">_vfs_devices</a>, <a class="el" href="vfs_8c_source.html#l00022">_vfs_fses</a>, <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, <a class="el" href="vfs_8h_source.html#l00115">fs_ops::dentry</a>, <a class="el" href="dentry_8c_source.html#l00084">dentry_cache_find_empty_entry()</a>, <a class="el" href="vfs_8h_source.html#l00062">dentry::dev</a>, <a class="el" href="vfs_8h_source.html#l00061">dentry::dev_indx</a>, <a class="el" href="dynamic__array_8c_source.html#l00071">dynamic_array_get()</a>, <a class="el" href="vfs_8h_source.html#l00056">dentry::flags</a>, <a class="el" href="vfs_8h_source.html#l00035">vfs_device_t::fs</a>, <a class="el" href="vfs_8h_source.html#l00059">dentry::fsdata</a>, <a class="el" href="vfs_8h_source.html#l00105">dentry_ops::get_fsdata</a>, <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="ext2_8h_source.html#l00089">INODE_LEN</a>, <a class="el" href="kmalloc_8c_source.html#l00053">kmalloc()</a>, <a class="el" href="log_8c_source.html#l00122">log_error()</a>, <a class="el" href="vfs_8h_source.html#l00060">dentry::ops</a>, <a class="el" href="vfs_8h_source.html#l00102">dentry_ops::read_inode</a>, <a class="el" href="dentry_8c_source.html#l00028">stat_cached_dentries</a>, and <a class="el" href="dentry_8c_source.html#l00029">stat_cached_inodes_area_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00240">dentry_get()</a>.</p>

</div>
</div>
<a id="aa70b793dfe8742b7c834f3b40a157853"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa70b793dfe8742b7c834f3b40a157853">&#9670;&nbsp;</a></span>dentry_cache_alloc()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_cache_alloc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00059">59</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* list_block = (<a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>*)<a class="code" href="kmalloc_8h.html#afec98775e8113dc6d98f75a582c3646f">kmalloc</a>(<a class="code" href="dentry_8c.html#a06545cfc80ed4c5d1f5fa67ccb5a6d36">DENTRY_ALLOC_SIZE</a>);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <a class="code" href="mem_8h.html#a6008112cc5f333e4e7d75b66bf81c89c">memset</a>((<a class="code" href="syscall__structs_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>*)list_block, 0, <a class="code" href="dentry_8c.html#a06545cfc80ed4c5d1f5fa67ccb5a6d36">DENTRY_ALLOC_SIZE</a>);</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    list_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a> = (<a class="code" href="structdentry.html">dentry_t</a>*)&amp;list_block[1];</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;    list_block-&gt;<a class="code" href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">len</a> = <a class="code" href="dentry_8c.html#a06545cfc80ed4c5d1f5fa67ccb5a6d36">DENTRY_ALLOC_SIZE</a> - ((<a class="code" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)&amp;list_block[1] - (<a class="code" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)&amp;list_block[0]);</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160; </div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a> == 0) {</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a> = list_block;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* last = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        <span class="keywordflow">while</span> (last-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a> != 0) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            last = last-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        }</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        last-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a> = list_block;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        list_block-&gt;<a class="code" href="structdentry__cache__list.html#ad0b43f9d0385bf81540298edcd6625de">prev</a> = last;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    }</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a06545cfc80ed4c5d1f5fa67ccb5a6d36"><div class="ttname"><a href="dentry_8c.html#a06545cfc80ed4c5d1f5fa67ccb5a6d36">DENTRY_ALLOC_SIZE</a></div><div class="ttdeci">#define DENTRY_ALLOC_SIZE</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00020">dentry.c:20</a></div></div>
<div class="ttc" id="adentry_8c_html_a0a10455924d574d1aefefa9eadd2cc25"><div class="ttname"><a href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a></div><div class="ttdeci">static dentry_cache_list_t * dentry_cache</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00030">dentry.c:30</a></div></div>
<div class="ttc" id="amem_8h_html_a6008112cc5f333e4e7d75b66bf81c89c"><div class="ttname"><a href="mem_8h.html#a6008112cc5f333e4e7d75b66bf81c89c">memset</a></div><div class="ttdeci">void memset(uint8_t *dest, uint8_t fll, uint32_t nbytes)</div><div class="ttdef"><b>Definition:</b> <a href="string_8c_source.html#l00003">string.c:3</a></div></div>
<div class="ttc" id="astructdentry__cache__list_html"><div class="ttname"><a href="structdentry__cache__list.html">dentry_cache_list</a></div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00074">vfs.h:74</a></div></div>
<div class="ttc" id="astructdentry__cache__list_html_a0421c3ca23b51e5847254324f14434a0"><div class="ttname"><a href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">dentry_cache_list::next</a></div><div class="ttdeci">struct dentry_cache_list * next</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00076">vfs.h:76</a></div></div>
<div class="ttc" id="astructdentry__cache__list_html_a1e947a7236852a9c36d5676e6d7f7454"><div class="ttname"><a href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">dentry_cache_list::data</a></div><div class="ttdeci">dentry_t * data</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00077">vfs.h:77</a></div></div>
<div class="ttc" id="astructdentry__cache__list_html_a59e319ce4f885d9a79bf3783d34f8ff8"><div class="ttname"><a href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">dentry_cache_list::len</a></div><div class="ttdeci">uint32_t len</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00078">vfs.h:78</a></div></div>
<div class="ttc" id="astructdentry__cache__list_html_ad0b43f9d0385bf81540298edcd6625de"><div class="ttname"><a href="structdentry__cache__list.html#ad0b43f9d0385bf81540298edcd6625de">dentry_cache_list::prev</a></div><div class="ttdeci">struct dentry_cache_list * prev</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00075">vfs.h:75</a></div></div>
<div class="ttc" id="asyscall__structs_8h_html_a435d1572bf3f880d55459d9805097f62"><div class="ttname"><a href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a></div><div class="ttdeci">unsigned int uint32_t</div><div class="ttdef"><b>Definition:</b> <a href="syscall__structs_8h_source.html#l00008">syscall_structs.h:8</a></div></div>
<div class="ttc" id="asyscall__structs_8h_html_aba7bc1797add20fe3efdf37ced1182c5"><div class="ttname"><a href="syscall__structs_8h.html#aba7bc1797add20fe3efdf37ced1182c5">uint8_t</a></div><div class="ttdeci">unsigned char uint8_t</div><div class="ttdef"><b>Definition:</b> <a href="syscall__structs_8h_source.html#l00010">syscall_structs.h:10</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00077">dentry_cache_list::data</a>, <a class="el" href="dentry_8c_source.html#l00020">DENTRY_ALLOC_SIZE</a>, <a class="el" href="dentry_8c_source.html#l00030">dentry_cache</a>, <a class="el" href="kmalloc_8c_source.html#l00053">kmalloc()</a>, <a class="el" href="vfs_8h_source.html#l00078">dentry_cache_list::len</a>, <a class="el" href="string_8c_source.html#l00003">memset()</a>, <a class="el" href="vfs_8h_source.html#l00076">dentry_cache_list::next</a>, and <a class="el" href="vfs_8h_source.html#l00075">dentry_cache_list::prev</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00084">dentry_cache_find_empty_entry()</a>.</p>

</div>
</div>
<a id="a6a4806dd03810e6f53fb61a317cbc613"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6a4806dd03810e6f53fb61a317cbc613">&#9670;&nbsp;</a></span>dentry_cache_find_empty_entry()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>* dentry_cache_find_empty_entry </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>In this function, we try to find an entry to fill it with a new dentry. Since we have a valid dentries in the cache, which isn't held by someone, they are also condidates to be replaced. But because we want to have more valid entries in the cache, we will start to look for a complitely free entry. </p>

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00084">84</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* dentry_cache_block = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <a class="code" href="structdentry.html">dentry_t</a>* valid_dentry_candidate = 0;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">while</span> (dentry_cache_block) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;        <span class="keywordtype">int</span> dentries_in_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">len</a> / <span class="keyword">sizeof</span>(<a class="code" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>);</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dentries_in_block; i++) {</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            <span class="keywordflow">if</span> (dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> == 0) {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="keywordflow">return</span> &amp;dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i];</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            }</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            <span class="keywordflow">if</span> (dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> == 0) {</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;                valid_dentry_candidate = &amp;dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i];</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            }</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;        }</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        dentry_cache_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    }</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160; </div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">/* If we hasn&#39;t found a complitely free entry, let&#39;s erase a </span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">       valid dentries in the cache, which isn&#39;t held by someone. */</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="keywordflow">if</span> (valid_dentry_candidate) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">return</span> valid_dentry_candidate;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160; </div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">/* If there is no space, let&#39;s allocate a bigger area. */</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;    <a class="code" href="dentry_8c.html#aa70b793dfe8742b7c834f3b40a157853">dentry_cache_alloc</a>();</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* last = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <span class="keywordflow">while</span> (last-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a> != 0) {</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        last = last-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    }</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">return</span> &amp;last-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[0];</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_aa70b793dfe8742b7c834f3b40a157853"><div class="ttname"><a href="dentry_8c.html#aa70b793dfe8742b7c834f3b40a157853">dentry_cache_alloc</a></div><div class="ttdeci">static void dentry_cache_alloc()</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00059">dentry.c:59</a></div></div>
<div class="ttc" id="avfs_8h_html_adb8466457632801d904444d0c7e8c272"><div class="ttname"><a href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a></div><div class="ttdeci">struct dentry dentry_t</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00001">vfs.h:72</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, <a class="el" href="vfs_8h_source.html#l00077">dentry_cache_list::data</a>, <a class="el" href="dentry_8c_source.html#l00030">dentry_cache</a>, <a class="el" href="dentry_8c_source.html#l00059">dentry_cache_alloc()</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="vfs_8h_source.html#l00078">dentry_cache_list::len</a>, and <a class="el" href="vfs_8h_source.html#l00076">dentry_cache_list::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00167">dentry_alloc_new()</a>.</p>

</div>
</div>
<a id="ac0d7784874f6ecc051f76b9463949191"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0d7784874f6ecc051f76b9463949191">&#9670;&nbsp;</a></span>dentry_delete_from_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_delete_from_cache </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>dentry_delete_from_cache compeletly deletes dentry from cache. In case when file was deleted and after that a new was created with the same inode_id, dentry can't recognize and could use old inode data. We need delete dentry from cache and free inode. </p>

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00136">136</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">/* This marks the dentry as deleted. */</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> = 0;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a>) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;        <a class="code" href="kmalloc_8h.html#a069f85a5001d71bc44d8be6532a4e432">kfree</a>(<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a>);</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <a class="code" href="dentry_8c.html#a841c690e629d9c51eac5eae5fc78b8a4">stat_cached_inodes_area_size</a> -= <a class="code" href="ext2_8h.html#a0ee19d50310bec0d74d03a156333b75c">INODE_LEN</a>;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dentry_8c.html#a0eba2c36d13ed4e8f51731dae9e849e3">need_to_free_inode_cache</a>()) {</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;        <a class="code" href="dentry_8c.html#a9bcb4e270f6db95e234f0ec7dfb8d1f9">can_cache_inodes</a> = 1;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a0eba2c36d13ed4e8f51731dae9e849e3"><div class="ttname"><a href="dentry_8c.html#a0eba2c36d13ed4e8f51731dae9e849e3">need_to_free_inode_cache</a></div><div class="ttdeci">static bool need_to_free_inode_cache()</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00033">dentry.c:33</a></div></div>
<div class="ttc" id="adentry_8c_html_a9bcb4e270f6db95e234f0ec7dfb8d1f9"><div class="ttname"><a href="dentry_8c.html#a9bcb4e270f6db95e234f0ec7dfb8d1f9">can_cache_inodes</a></div><div class="ttdeci">static bool can_cache_inodes</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00027">dentry.c:27</a></div></div>
<div class="ttc" id="akmalloc_8h_html_a069f85a5001d71bc44d8be6532a4e432"><div class="ttname"><a href="kmalloc_8h.html#a069f85a5001d71bc44d8be6532a4e432">kfree</a></div><div class="ttdeci">void kfree(void *ptr)</div><div class="ttdef"><b>Definition:</b> <a href="kmalloc_8c_source.html#l00087">kmalloc.c:87</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dentry_8c_source.html#l00027">can_cache_inodes</a>, <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="ext2_8h_source.html#l00089">INODE_LEN</a>, <a class="el" href="kmalloc_8c_source.html#l00087">kfree()</a>, <a class="el" href="dentry_8c_source.html#l00033">need_to_free_inode_cache()</a>, and <a class="el" href="dentry_8c_source.html#l00029">stat_cached_inodes_area_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00155">dentry_prefree()</a>, and <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>.</p>

</div>
</div>
<a id="a351416c910ba0401b8687ef7e9df3448"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a351416c910ba0401b8687ef7e9df3448">&#9670;&nbsp;</a></span>dentry_delete_inode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_delete_inode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00116">116</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;{</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <a class="code" href="kassert_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> == 0 &amp;&amp; <a class="code" href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#ad332b0c6df8654e8955cde613042800b">DENTRY_INODE_TO_BE_DELETED</a>));</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a>-&gt;<a class="code" href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">dentry</a>.<a class="code" href="structdentry__ops.html#a79c1dd2547c691d4702c8183169cbbb4">free_inode</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_afc4aba9ad1a484cc52d4bba738a3c9c1"><div class="ttname"><a href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a></div><div class="ttdeci">bool dentry_test_flag(dentry_t *dentry, uint32_t flag)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00330">dentry.c:330</a></div></div>
<div class="ttc" id="akassert_8h_html_aca68c0d4ac8df0838e209fb5300f7be3"><div class="ttname"><a href="kassert_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a></div><div class="ttdeci">#define ASSERT(x)</div><div class="ttdef"><b>Definition:</b> <a href="kassert_8h_source.html#l00016">kassert.h:16</a></div></div>
<div class="ttc" id="astructdentry__ops_html_a79c1dd2547c691d4702c8183169cbbb4"><div class="ttname"><a href="structdentry__ops.html#a79c1dd2547c691d4702c8183169cbbb4">dentry_ops::free_inode</a></div><div class="ttdeci">int(* free_inode)(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00104">vfs.h:104</a></div></div>
<div class="ttc" id="avfs_8h_html_ad332b0c6df8654e8955cde613042800b"><div class="ttname"><a href="vfs_8h.html#ad332b0c6df8654e8955cde613042800b">DENTRY_INODE_TO_BE_DELETED</a></div><div class="ttdeci">#define DENTRY_INODE_TO_BE_DELETED</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00051">vfs.h:51</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="kassert_8h_source.html#l00016">ASSERT</a>, <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, <a class="el" href="vfs_8h_source.html#l00115">fs_ops::dentry</a>, <a class="el" href="vfs_8h_source.html#l00051">DENTRY_INODE_TO_BE_DELETED</a>, <a class="el" href="dentry_8c_source.html#l00330">dentry_test_flag()</a>, <a class="el" href="vfs_8h_source.html#l00104">dentry_ops::free_inode</a>, and <a class="el" href="vfs_8h_source.html#l00060">dentry::ops</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>.</p>

</div>
</div>
<a id="aebac28d68ff3f24264ff52fe1bc57dec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aebac28d68ff3f24264ff52fe1bc57dec">&#9670;&nbsp;</a></span>dentry_duplicate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>* dentry_duplicate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00260">260</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;{</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a>++;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="structdentry.html">dentry</a>;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00240">dentry_get()</a>, <a class="el" href="proc_8c_source.html#l00122">proc_copy_of()</a>, <a class="el" href="vfs_8c_source.html#l00249">vfs_lookup()</a>, <a class="el" href="vfs_8c_source.html#l00418">vfs_mount()</a>, <a class="el" href="vfs_8c_source.html#l00163">vfs_open()</a>, and <a class="el" href="vfs_8c_source.html#l00358">vfs_resolve_path_start_from()</a>.</p>

</div>
</div>
<a id="a7ddfb25a846aa0f251527954821c97d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ddfb25a846aa0f251527954821c97d9">&#9670;&nbsp;</a></span>dentry_flush_inode()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_flush_inode </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00122">122</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;{</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#a6732bca494a9950526100a3f2605cbcc">DENTRY_DIRTY</a>)) {</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;        <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a>-&gt;<a class="code" href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">dentry</a>.<a class="code" href="structdentry__ops.html#a39343966da86741b285dda7a02ab8629">write_inode</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;        <a class="code" href="dentry_8c.html#a717a16a3c025a9b8751e8ad444698bc2">dentry_rem_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#a6732bca494a9950526100a3f2605cbcc">DENTRY_DIRTY</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a717a16a3c025a9b8751e8ad444698bc2"><div class="ttname"><a href="dentry_8c.html#a717a16a3c025a9b8751e8ad444698bc2">dentry_rem_flag</a></div><div class="ttdeci">void dentry_rem_flag(dentry_t *dentry, uint32_t flag)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00335">dentry.c:335</a></div></div>
<div class="ttc" id="astructdentry__ops_html_a39343966da86741b285dda7a02ab8629"><div class="ttname"><a href="structdentry__ops.html#a39343966da86741b285dda7a02ab8629">dentry_ops::write_inode</a></div><div class="ttdeci">int(* write_inode)(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00103">vfs.h:103</a></div></div>
<div class="ttc" id="avfs_8h_html_a6732bca494a9950526100a3f2605cbcc"><div class="ttname"><a href="vfs_8h.html#a6732bca494a9950526100a3f2605cbcc">DENTRY_DIRTY</a></div><div class="ttdeci">#define DENTRY_DIRTY</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00048">vfs.h:48</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00115">fs_ops::dentry</a>, <a class="el" href="vfs_8h_source.html#l00048">DENTRY_DIRTY</a>, <a class="el" href="dentry_8c_source.html#l00335">dentry_rem_flag()</a>, <a class="el" href="dentry_8c_source.html#l00330">dentry_test_flag()</a>, <a class="el" href="vfs_8h_source.html#l00060">dentry::ops</a>, and <a class="el" href="vfs_8h_source.html#l00103">dentry_ops::write_inode</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00215">dentry_flusher()</a>, and <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>.</p>

</div>
</div>
<a id="abd1b36974bb146945bfb53764b2164c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd1b36974bb146945bfb53764b2164c6">&#9670;&nbsp;</a></span>dentry_flusher()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_flusher </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Is a thread enrty point. The function flushes all inodes to drive. </p>

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00215">215</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;{</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* dentry_cache_block = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        <span class="keywordflow">while</span> (dentry_cache_block) {</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;            <span class="keywordtype">int</span> dentries_in_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">len</a> / <span class="keyword">sizeof</span>(<a class="code" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dentries_in_block; i++) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                <span class="keywordflow">if</span> (dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> != 0) {</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                    <a class="code" href="system_8h.html#a703bc6b45945b4d70aea606f7fbf26d6">system_disable_interrupts</a>();</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    <a class="code" href="dentry_8c.html#a7ddfb25a846aa0f251527954821c97d9">dentry_flush_inode</a>(&amp;dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i]);</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                    <a class="code" href="system_8h.html#a18251f86dd00a2f140019744e32329c2">system_enable_interrupts</a>();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                }</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;            }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;            dentry_cache_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;        }</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <a class="code" href="sys__handler_8h.html#a864932d40ab6b7e71858878b46aa7c47">ksys1</a>(<a class="code" href="syscall__structs_8h.html#adfe7fd422d15d2e3120975c49c4e74c3a937efe71419d16f1cff8061c34f9ef61">SYSSLEEP</a>, 2);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    }</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a7ddfb25a846aa0f251527954821c97d9"><div class="ttname"><a href="dentry_8c.html#a7ddfb25a846aa0f251527954821c97d9">dentry_flush_inode</a></div><div class="ttdeci">static void dentry_flush_inode(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00122">dentry.c:122</a></div></div>
<div class="ttc" id="asys__handler_8h_html_a864932d40ab6b7e71858878b46aa7c47"><div class="ttname"><a href="sys__handler_8h.html#a864932d40ab6b7e71858878b46aa7c47">ksys1</a></div><div class="ttdeci">#define ksys1(sys_id, a)</div><div class="ttdef"><b>Definition:</b> <a href="sys__handler_8h_source.html#l00010">sys_handler.h:10</a></div></div>
<div class="ttc" id="asyscall__structs_8h_html_adfe7fd422d15d2e3120975c49c4e74c3a937efe71419d16f1cff8061c34f9ef61"><div class="ttname"><a href="syscall__structs_8h.html#adfe7fd422d15d2e3120975c49c4e74c3a937efe71419d16f1cff8061c34f9ef61">SYSSLEEP</a></div><div class="ttdeci">@ SYSSLEEP</div><div class="ttdef"><b>Definition:</b> <a href="syscall__structs_8h_source.html#l00053">syscall_structs.h:53</a></div></div>
<div class="ttc" id="asystem_8h_html_a18251f86dd00a2f140019744e32329c2"><div class="ttname"><a href="system_8h.html#a18251f86dd00a2f140019744e32329c2">system_enable_interrupts</a></div><div class="ttdeci">void system_enable_interrupts()</div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00021">system.c:21</a></div></div>
<div class="ttc" id="asystem_8h_html_a703bc6b45945b4d70aea606f7fbf26d6"><div class="ttname"><a href="system_8h.html#a703bc6b45945b4d70aea606f7fbf26d6">system_disable_interrupts</a></div><div class="ttdeci">void system_disable_interrupts()</div><div class="ttdef"><b>Definition:</b> <a href="system_8c_source.html#l00015">system.c:15</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00077">dentry_cache_list::data</a>, <a class="el" href="dentry_8c_source.html#l00030">dentry_cache</a>, <a class="el" href="dentry_8c_source.html#l00122">dentry_flush_inode()</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="sys__handler_8h_source.html#l00010">ksys1</a>, <a class="el" href="vfs_8h_source.html#l00078">dentry_cache_list::len</a>, <a class="el" href="vfs_8h_source.html#l00076">dentry_cache_list::next</a>, <a class="el" href="syscall__structs_8h_source.html#l00053">SYSSLEEP</a>, <a class="el" href="system_8c_source.html#l00015">system_disable_interrupts()</a>, and <a class="el" href="system_8c_source.html#l00021">system_enable_interrupts()</a>.</p>

<p class="reference">Referenced by <a class="el" href="kernel_8c_source.html#l00058">launching()</a>.</p>

</div>
</div>
<a id="ae54e68df17f63fc2d4eaef436012adc4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae54e68df17f63fc2d4eaef436012adc4">&#9670;&nbsp;</a></span>dentry_force_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_force_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00291">291</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;{</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#af6234b1d8814237e5f7d3796537e2a33">DENTRY_MOUNTPOINT</a>)) {</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160; </div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> = 0;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    <a class="code" href="dentry_8c.html#a69e404d90f367fc57bb66dbaf1935343">dentry_put_impl</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a69e404d90f367fc57bb66dbaf1935343"><div class="ttname"><a href="dentry_8c.html#a69e404d90f367fc57bb66dbaf1935343">dentry_put_impl</a></div><div class="ttdeci">static void dentry_put_impl(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00266">dentry.c:266</a></div></div>
<div class="ttc" id="avfs_8h_html_af6234b1d8814237e5f7d3796537e2a33"><div class="ttname"><a href="vfs_8h.html#af6234b1d8814237e5f7d3796537e2a33">DENTRY_MOUNTPOINT</a></div><div class="ttdeci">#define DENTRY_MOUNTPOINT</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00049">vfs.h:49</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, <a class="el" href="vfs_8h_source.html#l00049">DENTRY_MOUNTPOINT</a>, <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>, and <a class="el" href="dentry_8c_source.html#l00330">dentry_test_flag()</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00311">dentry_put_all_dentries_of_dev()</a>.</p>

</div>
</div>
<a id="ac0aedc0c189c361d51354aa240ee4e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0aedc0c189c361d51354aa240ee4e30">&#9670;&nbsp;</a></span>dentry_get()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>* dentry_get </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>dev_indx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>inode_indx</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>There are 3 cases for each entry in a cache array: 1) We have a valid dentry which is held by someone. 2) We have a valid dentry which isn'y held by someone and ready to swapped out. 3) We have an unsed entry in the cache array. </p>

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00240">240</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;{</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="comment">/* We try to find the dentry in the cache */</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* dentry_cache_block = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="keywordflow">while</span> (dentry_cache_block) {</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordtype">int</span> dentries_in_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">len</a> / <span class="keyword">sizeof</span>(<a class="code" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dentries_in_block; i++) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;            <span class="keywordflow">if</span> (dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a5f1758d4cfa6f2d5d746de2192f61338">dev_indx</a> == dev_indx &amp;&amp; dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> == inode_indx) {</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                <span class="keywordflow">if</span> (!dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a>)</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                    <a class="code" href="dentry_8c.html#a9fc5d8cede26a76848d455a856dfaacf">stat_cached_dentries</a>++;</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                <span class="keywordflow">return</span> <a class="code" href="dentry_8c.html#aebac28d68ff3f24264ff52fe1bc57dec">dentry_duplicate</a>(&amp;dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i]);</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;            }</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        }</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        dentry_cache_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160; </div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;    <span class="comment">/* It means no dentry in the cache. Let&#39;s add it. */</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dentry_8c.html#a49bb077d5d65f1f859e1f7c4e79bf8a7">dentry_alloc_new</a>(dev_indx, inode_indx);</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a49bb077d5d65f1f859e1f7c4e79bf8a7"><div class="ttname"><a href="dentry_8c.html#a49bb077d5d65f1f859e1f7c4e79bf8a7">dentry_alloc_new</a></div><div class="ttdeci">static dentry_t * dentry_alloc_new(uint32_t dev_indx, uint32_t inode_indx)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00167">dentry.c:167</a></div></div>
<div class="ttc" id="adentry_8c_html_aebac28d68ff3f24264ff52fe1bc57dec"><div class="ttname"><a href="dentry_8c.html#aebac28d68ff3f24264ff52fe1bc57dec">dentry_duplicate</a></div><div class="ttdeci">dentry_t * dentry_duplicate(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00260">dentry.c:260</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, <a class="el" href="vfs_8h_source.html#l00077">dentry_cache_list::data</a>, <a class="el" href="dentry_8c_source.html#l00167">dentry_alloc_new()</a>, <a class="el" href="dentry_8c_source.html#l00030">dentry_cache</a>, <a class="el" href="dentry_8c_source.html#l00260">dentry_duplicate()</a>, <a class="el" href="vfs_8h_source.html#l00061">dentry::dev_indx</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="vfs_8h_source.html#l00078">dentry_cache_list::len</a>, <a class="el" href="vfs_8h_source.html#l00076">dentry_cache_list::next</a>, and <a class="el" href="dentry_8c_source.html#l00028">stat_cached_dentries</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00207">dentry_get_parent()</a>, <a class="el" href="ext2_8c_source.html#l00993">ext2_create()</a>, <a class="el" href="ext2_8c_source.html#l00907">ext2_mkdir()</a>, <a class="el" href="vfs_8c_source.html#l00249">vfs_lookup()</a>, <a class="el" href="vfs_8c_source.html#l00418">vfs_mount()</a>, and <a class="el" href="vfs_8c_source.html#l00358">vfs_resolve_path_start_from()</a>.</p>

</div>
</div>
<a id="af3851d9466c6d7064d13a78c766dffa9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af3851d9466c6d7064d13a78c766dffa9">&#9670;&nbsp;</a></span>dentry_get_parent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>* dentry_get_parent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00207">207</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;{</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dentry_8c.html#ac0aedc0c189c361d51354aa240ee4e30">dentry_get</a>(<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ad669d169b2ddd3a87091f2f258d6b675">parent_dev_indx</a>, <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ad72523d35c3e9a0a98c91b76f3ab515a">parent_inode_indx</a>);</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_ac0aedc0c189c361d51354aa240ee4e30"><div class="ttname"><a href="dentry_8c.html#ac0aedc0c189c361d51354aa240ee4e30">dentry_get</a></div><div class="ttdeci">dentry_t * dentry_get(uint32_t dev_indx, uint32_t inode_indx)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00240">dentry.c:240</a></div></div>
<div class="ttc" id="astructdentry_html_ad669d169b2ddd3a87091f2f258d6b675"><div class="ttname"><a href="structdentry.html#ad669d169b2ddd3a87091f2f258d6b675">dentry::parent_dev_indx</a></div><div class="ttdeci">uint32_t parent_dev_indx</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00065">vfs.h:65</a></div></div>
<div class="ttc" id="astructdentry_html_ad72523d35c3e9a0a98c91b76f3ab515a"><div class="ttname"><a href="structdentry.html#ad72523d35c3e9a0a98c91b76f3ab515a">dentry::parent_inode_indx</a></div><div class="ttdeci">uint32_t parent_inode_indx</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00064">vfs.h:64</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dentry_8c_source.html#l00240">dentry_get()</a>, <a class="el" href="vfs_8h_source.html#l00065">dentry::parent_dev_indx</a>, and <a class="el" href="vfs_8h_source.html#l00064">dentry::parent_inode_indx</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8c_source.html#l01015">ext2_rm()</a>, <a class="el" href="ext2_8c_source.html#l00929">ext2_rmdir()</a>, and <a class="el" href="proc_8c_source.html#l00193">proc_load()</a>.</p>

</div>
</div>
<a id="a729416ddb286cffb1a5eee4b850e8eec"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a729416ddb286cffb1a5eee4b850e8eec">&#9670;&nbsp;</a></span>dentry_inode_rem_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_inode_rem_flag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ext2_8h.html#af456ddc19314d0bde5426f9027e96b05">mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00353">353</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;{</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#a6640ef583a47258cca09cbad9a30f749">dentry_inode_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="edit_2main_8c.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>)) {</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;        <a class="code" href="dentry_8c.html#a7caf5229634e02f763b50829867068dc">dentry_set_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#a6732bca494a9950526100a3f2605cbcc">DENTRY_DIRTY</a>);</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    }</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a>-&gt;<a class="code" href="structinode__t.html#a1c4f9ec5d915951d176c80807f1b7f86">mode</a> &amp;= ~<a class="code" href="edit_2main_8c.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a6640ef583a47258cca09cbad9a30f749"><div class="ttname"><a href="dentry_8c.html#a6640ef583a47258cca09cbad9a30f749">dentry_inode_test_flag</a></div><div class="ttdeci">bool dentry_inode_test_flag(dentry_t *dentry, mode_t mode)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00348">dentry.c:348</a></div></div>
<div class="ttc" id="adentry_8c_html_a7caf5229634e02f763b50829867068dc"><div class="ttname"><a href="dentry_8c.html#a7caf5229634e02f763b50829867068dc">dentry_set_flag</a></div><div class="ttdeci">void dentry_set_flag(dentry_t *dentry, uint32_t flag)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00325">dentry.c:325</a></div></div>
<div class="ttc" id="aedit_2main_8c_html_a6b29e4f37f4482274af785ad5ffe96a7"><div class="ttname"><a href="edit_2main_8c.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a></div><div class="ttdeci">uint32_t mode</div><div class="ttdef"><b>Definition:</b> <a href="edit_2main_8c_source.html#l00018">main.c:18</a></div></div>
<div class="ttc" id="astructinode__t_html_a1c4f9ec5d915951d176c80807f1b7f86"><div class="ttname"><a href="structinode__t.html#a1c4f9ec5d915951d176c80807f1b7f86">inode_t::mode</a></div><div class="ttdeci">mode_t mode</div><div class="ttdef"><b>Definition:</b> <a href="ext2_8h_source.html#l00092">ext2.h:92</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00048">DENTRY_DIRTY</a>, <a class="el" href="dentry_8c_source.html#l00348">dentry_inode_test_flag()</a>, <a class="el" href="dentry_8c_source.html#l00325">dentry_set_flag()</a>, <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="ext2_8h_source.html#l00092">inode_t::mode</a>, and <a class="el" href="edit_2main_8c_source.html#l00018">mode</a>.</p>

</div>
</div>
<a id="abc023963b93341ce84e260d1806b1493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc023963b93341ce84e260d1806b1493">&#9670;&nbsp;</a></span>dentry_inode_set_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_inode_set_flag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ext2_8h.html#af456ddc19314d0bde5426f9027e96b05">mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00340">340</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;{</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dentry_8c.html#a6640ef583a47258cca09cbad9a30f749">dentry_inode_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="edit_2main_8c.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>)) {</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;        <a class="code" href="dentry_8c.html#a7caf5229634e02f763b50829867068dc">dentry_set_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#a6732bca494a9950526100a3f2605cbcc">DENTRY_DIRTY</a>);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    }</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a>-&gt;<a class="code" href="structinode__t.html#a1c4f9ec5d915951d176c80807f1b7f86">mode</a> |= <a class="code" href="edit_2main_8c.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00048">DENTRY_DIRTY</a>, <a class="el" href="dentry_8c_source.html#l00348">dentry_inode_test_flag()</a>, <a class="el" href="dentry_8c_source.html#l00325">dentry_set_flag()</a>, <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="ext2_8h_source.html#l00092">inode_t::mode</a>, and <a class="el" href="edit_2main_8c_source.html#l00018">mode</a>.</p>

</div>
</div>
<a id="a6640ef583a47258cca09cbad9a30f749"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6640ef583a47258cca09cbad9a30f749">&#9670;&nbsp;</a></span>dentry_inode_test_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a> dentry_inode_test_flag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="ext2_8h.html#af456ddc19314d0bde5426f9027e96b05">mode_t</a>&#160;</td>
          <td class="paramname"><em>mode</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00348">348</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;{</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a>-&gt;<a class="code" href="structinode__t.html#a1c4f9ec5d915951d176c80807f1b7f86">mode</a> &amp; <a class="code" href="edit_2main_8c.html#a6b29e4f37f4482274af785ad5ffe96a7">mode</a>) &gt; 0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="ext2_8h_source.html#l00092">inode_t::mode</a>, and <a class="el" href="edit_2main_8c_source.html#l00018">mode</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00353">dentry_inode_rem_flag()</a>, <a class="el" href="dentry_8c_source.html#l00340">dentry_inode_set_flag()</a>, <a class="el" href="proc_8c_source.html#l00313">proc_chdir()</a>, <a class="el" href="vfs_8c_source.html#l00349">vfs_getdents()</a>, <a class="el" href="vfs_8c_source.html#l00249">vfs_lookup()</a>, <a class="el" href="vfs_8c_source.html#l00324">vfs_mkdir()</a>, <a class="el" href="vfs_8c_source.html#l00418">vfs_mount()</a>, <a class="el" href="vfs_8c_source.html#l00163">vfs_open()</a>, <a class="el" href="vfs_8c_source.html#l00332">vfs_rmdir()</a>, and <a class="el" href="vfs_8c_source.html#l00232">vfs_unlink()</a>.</p>

</div>
</div>
<a id="a7f9e161643a68aafcef35ca297684df7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f9e161643a68aafcef35ca297684df7">&#9670;&nbsp;</a></span>dentry_prefree()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_prefree </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>dentry_prefree puts the dentry in a state when it can be safely replaced with a new one. Note: the dentry stays valid and can be reused without needless to read all data again. </p>

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00155">155</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="dentry_8c.html#a9bcb4e270f6db95e234f0ec7dfb8d1f9">can_cache_inodes</a>) {</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;        <a class="code" href="dentry_8c.html#ac0d7784874f6ecc051f76b9463949191">dentry_delete_from_cache</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#a0eba2c36d13ed4e8f51731dae9e849e3">need_to_free_inode_cache</a>()) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            <a class="code" href="dentry_8c.html#a80cc0f80828ae6440cdff27fc055cc41">free_inode_cache</a>();</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        }</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    }</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="dentry_8c.html#a9fc5d8cede26a76848d455a856dfaacf">stat_cached_dentries</a>--;</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a80cc0f80828ae6440cdff27fc055cc41"><div class="ttname"><a href="dentry_8c.html#a80cc0f80828ae6440cdff27fc055cc41">free_inode_cache</a></div><div class="ttdeci">static bool free_inode_cache()</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00038">dentry.c:38</a></div></div>
<div class="ttc" id="adentry_8c_html_ac0d7784874f6ecc051f76b9463949191"><div class="ttname"><a href="dentry_8c.html#ac0d7784874f6ecc051f76b9463949191">dentry_delete_from_cache</a></div><div class="ttdeci">static void dentry_delete_from_cache(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00136">dentry.c:136</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dentry_8c_source.html#l00027">can_cache_inodes</a>, <a class="el" href="dentry_8c_source.html#l00136">dentry_delete_from_cache()</a>, <a class="el" href="dentry_8c_source.html#l00038">free_inode_cache()</a>, <a class="el" href="dentry_8c_source.html#l00033">need_to_free_inode_cache()</a>, and <a class="el" href="dentry_8c_source.html#l00028">stat_cached_dentries</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>.</p>

</div>
</div>
<a id="a7b69e608ff6502aa7604cb61d1e85d3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7b69e608ff6502aa7604cb61d1e85d3e">&#9670;&nbsp;</a></span>dentry_put()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_put </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00301">301</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;{</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    <a class="code" href="kassert_8h.html#aca68c0d4ac8df0838e209fb5300f7be3">ASSERT</a>(<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> &gt; 0);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a>--;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160; </div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> == 0) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <a class="code" href="dentry_8c.html#a69e404d90f367fc57bb66dbaf1935343">dentry_put_impl</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="kassert_8h_source.html#l00016">ASSERT</a>, <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, and <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>.</p>

<p class="reference">Referenced by <a class="el" href="keyboard_8c_source.html#l00214">_kbdriver_notification()</a>, <a class="el" href="mouse_8c_source.html#l00033">_mouse_recieve_notification()</a>, <a class="el" href="system__commands_8c_source.html#l00023">_syscmd_ls()</a>, <a class="el" href="bga_8c_source.html#l00101">bga_recieve_notification()</a>, <a class="el" href="devfs_8c_source.html#l00531">devfs_mount()</a>, <a class="el" href="ext2_8c_source.html#l00993">ext2_create()</a>, <a class="el" href="ext2_8c_source.html#l00907">ext2_mkdir()</a>, <a class="el" href="proc_8c_source.html#l00313">proc_chdir()</a>, <a class="el" href="proc_8c_source.html#l00232">proc_free()</a>, <a class="el" href="proc_8c_source.html#l00193">proc_load()</a>, <a class="el" href="proc_8c_source.html#l00098">proc_setup_tty()</a>, <a class="el" href="system__commands_8c_source.html#l00132">procfs()</a>, <a class="el" href="ptmx_8c_source.html#l00037">ptmx_install()</a>, <a class="el" href="pty__slave_8c_source.html#l00058">pty_slave_create()</a>, <a class="el" href="system__commands_8c_source.html#l00104">read()</a>, <a class="el" href="system__commands_8c_source.html#l00198">rm()</a>, <a class="el" href="sys__handler_8c_source.html#l00233">sys_creat()</a>, <a class="el" href="sys__handler_8c_source.html#l00111">sys_open()</a>, <a class="el" href="sys__handler_8c_source.html#l00300">sys_rmdir()</a>, <a class="el" href="sys__handler_8c_source.html#l00210">sys_unlink()</a>, <a class="el" href="tty_8c_source.html#l00169">tty_new()</a>, <a class="el" href="system__commands_8c_source.html#l00153">umount()</a>, <a class="el" href="vfs_8c_source.html#l00199">vfs_close()</a>, <a class="el" href="vfs_8c_source.html#l00220">vfs_create()</a>, <a class="el" href="vfs_8c_source.html#l00358">vfs_resolve_path_start_from()</a>, and <a class="el" href="vfs_8c_source.html#l00447">vfs_umount()</a>.</p>

</div>
</div>
<a id="a657d79e124cfadcff09eb19d5068d242"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a657d79e124cfadcff09eb19d5068d242">&#9670;&nbsp;</a></span>dentry_put_all_dentries_of_dev()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_put_all_dentries_of_dev </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>dev_indx</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00311">311</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;{</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* dentry_cache_block = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">while</span> (dentry_cache_block) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <span class="keywordtype">int</span> dentries_in_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">len</a> / <span class="keyword">sizeof</span>(<a class="code" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dentries_in_block; i++) {</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;            <span class="keywordflow">if</span> (dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a5f1758d4cfa6f2d5d746de2192f61338">dev_indx</a> == dev_indx &amp;&amp; dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a> != 0) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;                <a class="code" href="dentry_8c.html#ae54e68df17f63fc2d4eaef436012adc4">dentry_force_put</a>(&amp;dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i]);</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;        dentry_cache_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;    }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_ae54e68df17f63fc2d4eaef436012adc4"><div class="ttname"><a href="dentry_8c.html#ae54e68df17f63fc2d4eaef436012adc4">dentry_force_put</a></div><div class="ttdeci">void dentry_force_put(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00291">dentry.c:291</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00077">dentry_cache_list::data</a>, <a class="el" href="dentry_8c_source.html#l00030">dentry_cache</a>, <a class="el" href="dentry_8c_source.html#l00291">dentry_force_put()</a>, <a class="el" href="vfs_8h_source.html#l00061">dentry::dev_indx</a>, <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="vfs_8h_source.html#l00078">dentry_cache_list::len</a>, and <a class="el" href="vfs_8h_source.html#l00076">dentry_cache_list::next</a>.</p>

<p class="reference">Referenced by <a class="el" href="vfs_8c_source.html#l00114">vfs_eject_device()</a>.</p>

</div>
</div>
<a id="a69e404d90f367fc57bb66dbaf1935343"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69e404d90f367fc57bb66dbaf1935343">&#9670;&nbsp;</a></span>dentry_put_impl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void dentry_put_impl </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00266">266</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;{</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#a2c91a99637d66a8177ab4bf8ebdd6e9f">DENTRY_CUSTOM</a>)) {</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> = 0;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a>-&gt;<a class="code" href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">dentry</a>.<a class="code" href="structdentry__ops.html#a79c1dd2547c691d4702c8183169cbbb4">free_inode</a>) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a449902caf8375b0834b0b2852896dfc1">ops</a>-&gt;<a class="code" href="structfs__ops.html#a00ef40bfbe8133b4e40ba6f22e120f68">dentry</a>.<a class="code" href="structdentry__ops.html#a79c1dd2547c691d4702c8183169cbbb4">free_inode</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        }</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    }</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#afc4aba9ad1a484cc52d4bba738a3c9c1">dentry_test_flag</a>(<a class="code" href="structdentry.html">dentry</a>, <a class="code" href="vfs_8h.html#ad332b0c6df8654e8955cde613042800b">DENTRY_INODE_TO_BE_DELETED</a>)) {</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="preprocessor">#ifdef DENTRY_DEBUG</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        <a class="code" href="log_8h.html#a5ed8e2adc6340d877478a62cc1d448c9">log</a>(<span class="stringliteral">&quot;Inode delete %d&quot;</span>, <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a>);</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <a class="code" href="dentry_8c.html#a351416c910ba0401b8687ef7e9df3448">dentry_delete_inode</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="dentry_8c.html#ac0d7784874f6ecc051f76b9463949191">dentry_delete_from_cache</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;    }</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;<span class="preprocessor">#ifdef DENTRY_DEBUG</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="log_8h.html#a5ed8e2adc6340d877478a62cc1d448c9">log</a>(<span class="stringliteral">&quot;Inode flushed %d&quot;</span>, <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a>);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;    <a class="code" href="dentry_8c.html#a7ddfb25a846aa0f251527954821c97d9">dentry_flush_inode</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <a class="code" href="dentry_8c.html#a7f9e161643a68aafcef35ca297684df7">dentry_prefree</a>(<a class="code" href="structdentry.html">dentry</a>);</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_a351416c910ba0401b8687ef7e9df3448"><div class="ttname"><a href="dentry_8c.html#a351416c910ba0401b8687ef7e9df3448">dentry_delete_inode</a></div><div class="ttdeci">static void dentry_delete_inode(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00116">dentry.c:116</a></div></div>
<div class="ttc" id="adentry_8c_html_a7f9e161643a68aafcef35ca297684df7"><div class="ttname"><a href="dentry_8c.html#a7f9e161643a68aafcef35ca297684df7">dentry_prefree</a></div><div class="ttdeci">static void dentry_prefree(dentry_t *dentry)</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00155">dentry.c:155</a></div></div>
<div class="ttc" id="alog_8h_html_a5ed8e2adc6340d877478a62cc1d448c9"><div class="ttname"><a href="log_8h.html#a5ed8e2adc6340d877478a62cc1d448c9">log</a></div><div class="ttdeci">void log(const char *format,...)</div><div class="ttdef"><b>Definition:</b> <a href="log_8c_source.html#l00062">log.c:62</a></div></div>
<div class="ttc" id="avfs_8h_html_a2c91a99637d66a8177ab4bf8ebdd6e9f"><div class="ttname"><a href="vfs_8h.html#a2c91a99637d66a8177ab4bf8ebdd6e9f">DENTRY_CUSTOM</a></div><div class="ttdeci">#define DENTRY_CUSTOM</div><div class="ttdef"><b>Definition:</b> <a href="vfs_8h_source.html#l00053">vfs.h:53</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00115">fs_ops::dentry</a>, <a class="el" href="vfs_8h_source.html#l00053">DENTRY_CUSTOM</a>, <a class="el" href="dentry_8c_source.html#l00136">dentry_delete_from_cache()</a>, <a class="el" href="dentry_8c_source.html#l00116">dentry_delete_inode()</a>, <a class="el" href="dentry_8c_source.html#l00122">dentry_flush_inode()</a>, <a class="el" href="vfs_8h_source.html#l00051">DENTRY_INODE_TO_BE_DELETED</a>, <a class="el" href="dentry_8c_source.html#l00155">dentry_prefree()</a>, <a class="el" href="dentry_8c_source.html#l00330">dentry_test_flag()</a>, <a class="el" href="vfs_8h_source.html#l00104">dentry_ops::free_inode</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="log_8c_source.html#l00062">log()</a>, and <a class="el" href="vfs_8h_source.html#l00060">dentry::ops</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00291">dentry_force_put()</a>, and <a class="el" href="dentry_8c_source.html#l00301">dentry_put()</a>.</p>

</div>
</div>
<a id="a717a16a3c025a9b8751e8ad444698bc2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a717a16a3c025a9b8751e8ad444698bc2">&#9670;&nbsp;</a></span>dentry_rem_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_rem_flag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00335">335</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;{</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ab4c40ea06292550bc743b6d49b03487d">flags</a> &amp;= ~flag;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00056">dentry::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00122">dentry_flush_inode()</a>, and <a class="el" href="vfs_8c_source.html#l00447">vfs_umount()</a>.</p>

</div>
</div>
<a id="a7caf5229634e02f763b50829867068dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7caf5229634e02f763b50829867068dc">&#9670;&nbsp;</a></span>dentry_set_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_set_flag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00325">325</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;{</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    <a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ab4c40ea06292550bc743b6d49b03487d">flags</a> |= flag;</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00056">dentry::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="ext2_8c_source.html#l00719">_ext2_add_child()</a>, <a class="el" href="ext2_8c_source.html#l00340">_ext2_allocate_block_for_inode()</a>, <a class="el" href="ext2_8c_source.html#l00748">_ext2_rm_child()</a>, <a class="el" href="ext2_8c_source.html#l00276">_ext2_set_block_of_inode()</a>, <a class="el" href="ext2_8c_source.html#l00766">_ext2_setup_dir()</a>, <a class="el" href="ext2_8c_source.html#l00786">_ext2_setup_file()</a>, <a class="el" href="dentry_8c_source.html#l00353">dentry_inode_rem_flag()</a>, <a class="el" href="dentry_8c_source.html#l00340">dentry_inode_set_flag()</a>, <a class="el" href="devfs_8c_source.html#l00499">devfs_mkdir()</a>, <a class="el" href="devfs_8c_source.html#l00515">devfs_register()</a>, <a class="el" href="ext2_8c_source.html#l00872">ext2_truncate()</a>, <a class="el" href="ext2_8c_source.html#l00838">ext2_write()</a>, <a class="el" href="pty__master_8c_source.html#l00098">pty_master_alloc()</a>, <a class="el" href="vfs_8c_source.html#l00418">vfs_mount()</a>, <a class="el" href="vfs_8c_source.html#l00332">vfs_rmdir()</a>, and <a class="el" href="vfs_8c_source.html#l00232">vfs_unlink()</a>.</p>

</div>
</div>
<a id="ac5296fce1c722f24de068b1250be6fd0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac5296fce1c722f24de068b1250be6fd0">&#9670;&nbsp;</a></span>dentry_set_parent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dentry_set_parent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>to</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>parent</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00201">201</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;{</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    to-&gt;<a class="code" href="structdentry.html#ad72523d35c3e9a0a98c91b76f3ab515a">parent_inode_indx</a> = parent-&gt;<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    to-&gt;<a class="code" href="structdentry.html#ad669d169b2ddd3a87091f2f258d6b675">parent_dev_indx</a> = parent-&gt;<a class="code" href="structdentry.html#a5f1758d4cfa6f2d5d746de2192f61338">dev_indx</a>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00061">dentry::dev_indx</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="vfs_8h_source.html#l00065">dentry::parent_dev_indx</a>, and <a class="el" href="vfs_8h_source.html#l00064">dentry::parent_inode_indx</a>.</p>

<p class="reference">Referenced by <a class="el" href="vfs_8c_source.html#l00358">vfs_resolve_path_start_from()</a>.</p>

</div>
</div>
<a id="a6d281d3348d9317ad0fdb3a0c51520b6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6d281d3348d9317ad0fdb3a0c51520b6">&#9670;&nbsp;</a></span>dentry_stat_cached_count()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> dentry_stat_cached_count </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00361">361</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;{</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="dentry_8c.html#a9fc5d8cede26a76848d455a856dfaacf">stat_cached_dentries</a>;</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dentry_8c_source.html#l00028">stat_cached_dentries</a>.</p>

<p class="reference">Referenced by <a class="el" href="system__commands_8c_source.html#l00212">dentries_stat()</a>.</p>

</div>
</div>
<a id="afc4aba9ad1a484cc52d4bba738a3c9c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afc4aba9ad1a484cc52d4bba738a3c9c1">&#9670;&nbsp;</a></span>dentry_test_flag()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a> dentry_test_flag </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a> *&#160;</td>
          <td class="paramname"><em>dentry</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>flag</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00330">330</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="structdentry.html">dentry</a>-&gt;<a class="code" href="structdentry.html#ab4c40ea06292550bc743b6d49b03487d">flags</a> &amp; flag) &gt; 0;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="vfs_8h_source.html#l00056">dentry::flags</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00116">dentry_delete_inode()</a>, <a class="el" href="dentry_8c_source.html#l00122">dentry_flush_inode()</a>, <a class="el" href="dentry_8c_source.html#l00291">dentry_force_put()</a>, <a class="el" href="dentry_8c_source.html#l00266">dentry_put_impl()</a>, <a class="el" href="vfs_8c_source.html#l00249">vfs_lookup()</a>, <a class="el" href="vfs_8c_source.html#l00418">vfs_mount()</a>, <a class="el" href="vfs_8c_source.html#l00163">vfs_open()</a>, <a class="el" href="vfs_8c_source.html#l00358">vfs_resolve_path_start_from()</a>, <a class="el" href="vfs_8c_source.html#l00332">vfs_rmdir()</a>, and <a class="el" href="vfs_8c_source.html#l00447">vfs_umount()</a>.</p>

</div>
</div>
<a id="a80cc0f80828ae6440cdff27fc055cc41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a80cc0f80828ae6440cdff27fc055cc41">&#9670;&nbsp;</a></span>free_inode_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a> free_inode_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00038">38</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;{</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <a class="code" href="structdentry__cache__list.html">dentry_cache_list_t</a>* dentry_cache_block = <a class="code" href="dentry_8c.html#a0a10455924d574d1aefefa9eadd2cc25">dentry_cache</a>;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <a class="code" href="structdentry.html">dentry_t</a>* valid_dentry_candidate = 0;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="keywordflow">while</span> (dentry_cache_block) {</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        <span class="keywordtype">int</span> dentries_in_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a59e319ce4f885d9a79bf3783d34f8ff8">len</a> / <span class="keyword">sizeof</span>(<a class="code" href="vfs_8h.html#adb8466457632801d904444d0c7e8c272">dentry_t</a>);</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; dentries_in_block; i++) {</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;            <span class="keywordflow">if</span> (dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a5d1923813933d33cedb7df4aaee6cf84">d_count</a> == 0) {</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#a7315cd079d1109369c66fe804b9fd4ba">inode_indx</a> = 0;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                <a class="code" href="dentry_8c.html#a841c690e629d9c51eac5eae5fc78b8a4">stat_cached_inodes_area_size</a> -= <a class="code" href="ext2_8h.html#a0ee19d50310bec0d74d03a156333b75c">INODE_LEN</a>;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                <a class="code" href="kmalloc_8h.html#a069f85a5001d71bc44d8be6532a4e432">kfree</a>(dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a1e947a7236852a9c36d5676e6d7f7454">data</a>[i].<a class="code" href="structdentry.html#aa570c7b3f7c32ef505901f3a3e2931b5">inode</a>);</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;            }</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;        }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;        dentry_cache_block = dentry_cache_block-&gt;<a class="code" href="structdentry__cache__list.html#a0421c3ca23b51e5847254324f14434a0">next</a>;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    }</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="dentry_8c.html#a0eba2c36d13ed4e8f51731dae9e849e3">need_to_free_inode_cache</a>()) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <a class="code" href="dentry_8c.html#a9bcb4e270f6db95e234f0ec7dfb8d1f9">can_cache_inodes</a> = 0;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    }</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dentry_8c_source.html#l00027">can_cache_inodes</a>, <a class="el" href="vfs_8h_source.html#l00055">dentry::d_count</a>, <a class="el" href="vfs_8h_source.html#l00077">dentry_cache_list::data</a>, <a class="el" href="dentry_8c_source.html#l00030">dentry_cache</a>, <a class="el" href="vfs_8h_source.html#l00058">dentry::inode</a>, <a class="el" href="vfs_8h_source.html#l00057">dentry::inode_indx</a>, <a class="el" href="ext2_8h_source.html#l00089">INODE_LEN</a>, <a class="el" href="kmalloc_8c_source.html#l00087">kfree()</a>, <a class="el" href="vfs_8h_source.html#l00078">dentry_cache_list::len</a>, <a class="el" href="dentry_8c_source.html#l00033">need_to_free_inode_cache()</a>, <a class="el" href="vfs_8h_source.html#l00076">dentry_cache_list::next</a>, and <a class="el" href="dentry_8c_source.html#l00029">stat_cached_inodes_area_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00155">dentry_prefree()</a>.</p>

</div>
</div>
<a id="a0eba2c36d13ed4e8f51731dae9e849e3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0eba2c36d13ed4e8f51731dae9e849e3">&#9670;&nbsp;</a></span>need_to_free_inode_cache()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a> need_to_free_inode_cache </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00033">33</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>
<div class="fragment"><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;{</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="keywordflow">return</span> (<a class="code" href="dentry_8c.html#a841c690e629d9c51eac5eae5fc78b8a4">stat_cached_inodes_area_size</a> &gt; <a class="code" href="dentry_8c.html#adf65e4375d24782110f0e05ccfa023de">DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE</a>);</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;}</div>
<div class="ttc" id="adentry_8c_html_adf65e4375d24782110f0e05ccfa023de"><div class="ttname"><a href="dentry_8c.html#adf65e4375d24782110f0e05ccfa023de">DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE</a></div><div class="ttdeci">#define DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE</div><div class="ttdef"><b>Definition:</b> <a href="dentry_8c_source.html#l00021">dentry.c:21</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="dentry_8c_source.html#l00021">DENTRY_SWAP_THRESHOLD_FOR_INODE_CACHE</a>, and <a class="el" href="dentry_8c_source.html#l00029">stat_cached_inodes_area_size</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00136">dentry_delete_from_cache()</a>, <a class="el" href="dentry_8c_source.html#l00155">dentry_prefree()</a>, and <a class="el" href="dentry_8c_source.html#l00038">free_inode_cache()</a>.</p>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1440b9e3b3bbb1893389e0e6a5017ef0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1440b9e3b3bbb1893389e0e6a5017ef0">&#9670;&nbsp;</a></span>_vfs_devices</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structvfs__device__t.html">vfs_device_t</a> _vfs_devices[<a class="el" href="driver__manager_8h.html#a0cea68640d32312d57811eef08df8369">MAX_DEVICES_COUNT</a>]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vfs_8c_source.html#l00021">21</a> of file <a class="el" href="vfs_8c_source.html">vfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00167">dentry_alloc_new()</a>, <a class="el" href="vfs_8c_source.html#l00072">vfs_add_dev()</a>, <a class="el" href="vfs_8c_source.html#l00091">vfs_add_dev_with_fs()</a>, <a class="el" href="vfs_8c_source.html#l00050">vfs_choose_fs_of_dev()</a>, and <a class="el" href="vfs_8c_source.html#l00114">vfs_eject_device()</a>.</p>

</div>
</div>
<a id="a749d224b855218d25c593f77bb78177f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a749d224b855218d25c593f77bb78177f">&#9670;&nbsp;</a></span>_vfs_fses</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="dynamic__array_8h.html#ace0cd9ffaa622afed35768780ac18d17">dynamic_array_t</a> _vfs_fses</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vfs_8c_source.html#l00022">22</a> of file <a class="el" href="vfs_8c_source.html">vfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00167">dentry_alloc_new()</a>, <a class="el" href="vfs_8c_source.html#l00091">vfs_add_dev_with_fs()</a>, <a class="el" href="vfs_8c_source.html#l00128">vfs_add_fs()</a>, <a class="el" href="vfs_8c_source.html#l00050">vfs_choose_fs_of_dev()</a>, <a class="el" href="vfs_8c_source.html#l00114">vfs_eject_device()</a>, and <a class="el" href="vfs_8c_source.html#l00044">vfs_install()</a>.</p>

</div>
</div>
<a id="a9bcb4e270f6db95e234f0ec7dfb8d1f9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9bcb4e270f6db95e234f0ec7dfb8d1f9">&#9670;&nbsp;</a></span>can_cache_inodes</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="include_2types_8h.html#ad5c9d4ba3dc37783a528b0925dc981a0">bool</a> can_cache_inodes = 1</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00027">27</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00136">dentry_delete_from_cache()</a>, <a class="el" href="dentry_8c_source.html#l00155">dentry_prefree()</a>, and <a class="el" href="dentry_8c_source.html#l00038">free_inode_cache()</a>.</p>

</div>
</div>
<a id="a0a10455924d574d1aefefa9eadd2cc25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a10455924d574d1aefefa9eadd2cc25">&#9670;&nbsp;</a></span>dentry_cache</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="vfs_8h.html#a064037ddd427e5d6b34028d44d124626">dentry_cache_list_t</a>* dentry_cache</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00030">30</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00059">dentry_cache_alloc()</a>, <a class="el" href="dentry_8c_source.html#l00084">dentry_cache_find_empty_entry()</a>, <a class="el" href="dentry_8c_source.html#l00215">dentry_flusher()</a>, <a class="el" href="dentry_8c_source.html#l00240">dentry_get()</a>, <a class="el" href="dentry_8c_source.html#l00311">dentry_put_all_dentries_of_dev()</a>, and <a class="el" href="dentry_8c_source.html#l00038">free_inode_cache()</a>.</p>

</div>
</div>
<a id="a3131a395ac1e16e192d35b2f2ad0f8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3131a395ac1e16e192d35b2f2ad0f8dd">&#9670;&nbsp;</a></span>dentry_cahced</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syscall__structs_8h.html#a273cf69d639a59973b6019625df33e30">uint16_t</a>* dentry_cahced</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00031">31</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

</div>
</div>
<a id="a0d65079fb3ea2a5b88922408097fca7c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0d65079fb3ea2a5b88922408097fca7c">&#9670;&nbsp;</a></span>root_fs_dev_id</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> root_fs_dev_id</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">extern</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="vfs_8c_source.html#l00023">23</a> of file <a class="el" href="vfs_8c_source.html">vfs.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="vfs_8c_source.html#l00072">vfs_add_dev()</a>, <a class="el" href="vfs_8c_source.html#l00091">vfs_add_dev_with_fs()</a>, and <a class="el" href="vfs_8c_source.html#l00358">vfs_resolve_path_start_from()</a>.</p>

</div>
</div>
<a id="a9fc5d8cede26a76848d455a856dfaacf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9fc5d8cede26a76848d455a856dfaacf">&#9670;&nbsp;</a></span>stat_cached_dentries</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> stat_cached_dentries = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00028">28</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00167">dentry_alloc_new()</a>, <a class="el" href="dentry_8c_source.html#l00240">dentry_get()</a>, <a class="el" href="dentry_8c_source.html#l00155">dentry_prefree()</a>, and <a class="el" href="dentry_8c_source.html#l00361">dentry_stat_cached_count()</a>.</p>

</div>
</div>
<a id="a841c690e629d9c51eac5eae5fc78b8a4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a841c690e629d9c51eac5eae5fc78b8a4">&#9670;&nbsp;</a></span>stat_cached_inodes_area_size</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="syscall__structs_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> stat_cached_inodes_area_size = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="dentry_8c_source.html#l00029">29</a> of file <a class="el" href="dentry_8c_source.html">dentry.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="dentry_8c_source.html#l00167">dentry_alloc_new()</a>, <a class="el" href="dentry_8c_source.html#l00136">dentry_delete_from_cache()</a>, <a class="el" href="dentry_8c_source.html#l00038">free_inode_cache()</a>, and <a class="el" href="dentry_8c_source.html#l00033">need_to_free_inode_cache()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jan 26 2021 19:11:30 for oneOS by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
